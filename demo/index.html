<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>gs-element-blockly Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="../gs-element-blockly.html">
  </head>
  <body unresolved>

    <p>An example of <code>&lt;gs-element-blockly&gt;</code>:</p>
    <p>
      <button id="default_toolboxbtn">Default toolbox</button>
      <button id="limited_toolboxbtn">Limited toolbox</button>
      <button id="print_xmlbtn">Print xml</button>
      <button id="set_xmlbtn">Set xml</button>
      <button id="set_primitive_proceduresbtn">Set customblocks</button>
      <input type="text" id="primitive_procedurestxt" value='["Poner_FloresAl_", "Podar"]'></input><br />
      <button id="set_primitive_functionsbtn">Set functions</button>
      <input type="text" id="primitive_functionstxt" value='["hayFlores_en_", "cuantasHay_en_"]'></input>
      <button id="pruebaPrimitiveProcedures">pruebaPrimitiveProcedures</button>
    </p>
    <gs-element-blockly>
    </gs-element-blockly>

		<p><button id="generatebtn">Generar CÃ³digo</button></p>
    <textarea id="code" rows="20" cols="80"></textarea>

    <script>
      var blocklyElement = document.querySelector('gs-element-blockly');

      document.querySelector('#generatebtn').addEventListener('click', function() {
        document.getElementById("code").innerHTML = blocklyElement.generateCode();
      });

      document.querySelector('#default_toolboxbtn').addEventListener('click', function() {
        blocklyElement.set('toolbox', "");
      });

      document.querySelector('#limited_toolboxbtn').addEventListener('click', function() {
        blocklyElement.set('toolbox', '{ "visible": ["Poner", "Sacar"], "disabled": ["Literales"]}');
      });

      document.querySelector('#set_primitive_proceduresbtn').addEventListener('click', function() {
        blocklyElement.set('primitiveProcedures', document.getElementById("primitive_procedurestxt").value);
      });

      document.querySelector('#set_primitive_functionsbtn').addEventListener('click', function() {
        blocklyElement.set('primitiveFunctions', document.getElementById("primitive_functionstxt").value);
      });

      document.querySelector('#print_xmlbtn').addEventListener('click', function() {
        console.log(blocklyElement.get('workspaceXml'));
      });

      document.querySelector('#set_xmlbtn').addEventListener('click', function() {
        blocklyElement.set('workspaceXml',prompt("Paste xml here:", ""));
      });

      document.querySelector('#pruebaPrimitiveProcedures').addEventListener('click', function() {
        blocklyElement.set('primitiveProcedures',[ "IrAlProximoEstudiante", "DarCaramelo", "IrAlEscritorio", "ComerCaramelos", "RecolectarPapel"]);
        blocklyElement.set('workspaceXml','<xml xmlns="http://www.w3.org/1999/xhtml"><block type="Program" id="{XiKDv/%.3{(~rx0EF~*" deletable="false" movable="false" editable="false" x="30" y="30"><statement name="program"><block type="procedures_callnoreturn" id="VX~YA}X|YG.ej0U5*)s+"><mutation name="Repartir caramelos"></mutation><next><block type="procedures_callnoreturn" id=":6V{C^`ucRTL%VLn[]L^"><mutation name="Recolectar papeles"></mutation></block></next></block></statement></block><block type="procedures_defnoreturn" id="7uQ8[(hgK$*j-$(gs0nG" x="29" y="157"><field name="NAME">Repartir caramelos</field><comment pinned="false" h="80" w="160">Describe el procedimiento...</comment><statement name="STACK"><block type="Repetir" id="FG|pBJ4r-~yJ`m_,rJQp"><value name="count"><block type="math_number" id="WL(,(B~+*[e*,zl76Gms"><field name="NUM">19</field></block></value><statement name="block"><block type="IrAlProximoEstudiante" id="w+[}Z~X+/OPx-smKg$K["><next><block type="DarCaramelo" id="@M`SO=EC!*PQntKvTK(Y"></block></next></block></statement><next><block type="IrAlEscritorio" id="v}#i$d=$=S|NNp8?8b(1"><next><block type="ComerCaramelos" id="~$R#ZL0*p3+D(y2U$u~I"></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="l!UoPXA~5R%umTChNj5d" x="294" y="155"><field name="NAME">Recolectar papeles</field><comment pinned="false" h="80" w="160">Describe el procedimiento...</comment><statement name="STACK"><block type="Repetir" id="%b)*!nUW/o8Cja|{KCh:"><value name="count"><block type="math_number" id="^;8gt/7ifqTNu;6..aty"><field name="NUM">19</field></block></value><statement name="block"><block type="IrAlProximoEstudiante" id="aY3qgGQ+c3_4W#Tex(jj"><next><block type="RecolectarPapel" id="Lx??!jmx8|Xyp1OFg$)k"></block></next></block></statement><next><block type="IrAlEscritorio" id=";Ne$)I+hI[SK`N:H1?,F"></block></next></block></statement></block></xml>');
      });
    </script>

  </body>
</html>
